# ============================================
# YYChat 完整环境变量配置示例
# ============================================
# 复制此文件为 .env 并根据需要修改配置值

# ============================================
# 🔑 核心API密钥配置
# ============================================
# OpenAI API密钥
OPENAI_API_KEY=your-openai-api-key-here

# YYChat API密钥
YYCHAT_API_KEY=your-yychat-api-key-here

# 外部服务API密钥
TAVILY_API_KEY=your-tavily-api-key-here

# ============================================
# 🤖 AI模型配置
# ============================================
# OpenAI模型名称
OPENAI_MODEL=gpt-4.1

# OpenAI API基础URL
OPENAI_BASE_URL=https://api.openai.com/v1

# 模型温度参数 (0.0-2.0)
OPENAI_TEMPERATURE=0.75

# 最大token数量
OPENAI_MAX_TOKENS=16384

# ============================================
# 🧠 记忆管理配置
# ============================================
# Mem0 API密钥
MEM0_API_KEY=your-mem0-api-key-here

# Mem0服务地址
MEM0_BASE_URL=http://192.168.66.163:8765

# 是否使用本地Mem0
MEMO_USE_LOCAL=false

# Mem0 LLM提供商
MEM0_LLM_PROVIDER=openai

# Mem0 LLM模型
MEM0_LLM_CONFIG_MODEL=gpt-4.1

# Mem0 LLM最大token数
MEM0_LLM_CONFIG_MAX_TOKENS=32768

# Mem0嵌入模型
MEM0_EMBEDDER_MODEL=text-embedding-3-small

# 记忆检索数量限制
MEMORY_RETRIEVAL_LIMIT=5

# 记忆检索超时时间 (秒)
MEMORY_RETRIEVAL_TIMEOUT=0.5

# 是否启用记忆检索
ENABLE_MEMORY_RETRIEVAL=true

# 控制会话中写入memory的时机
# 可选值: both(同时保存用户输入和助手回复), user_only(只保存用户输入), assistant_only(只保存助手回复)
MEMORY_SAVE_MODE=both

# ============================================
# 💾 数据存储配置
# ============================================
# 向量存储提供商 (chroma, qdrant)
VECTOR_STORE_PROVIDER=chroma

# ChromaDB持久化目录
CHROMA_PERSIST_DIRECTORY=./chroma_db

# ChromaDB集合名称
CHROMA_COLLECTION_NAME=chat_history

# Qdrant服务器地址
QDRANT_HOST=192.168.66.163

# Qdrant服务器端口
QDRANT_PORT=6333

# Qdrant API密钥
QDRANT_API_KEY=

# Qdrant集合名称
QDRANT_COLLECTION_NAME=chat_history

# ============================================
# 🚀 服务器配置
# ============================================
# 服务器监听地址
SERVER_HOST=0.0.0.0

# 服务器监听端口
SERVER_PORT=8000

# ============================================
# 💬 聊天引擎配置
# ============================================
# 聊天引擎类型: chat_engine, mem0_proxy
CHAT_ENGINE=chat_engine

# 默认人格配置
DEFAULT_PERSONALITY=health_assistant

# 是否默认启用流式响应
STREAM_DEFAULT=true

# 是否默认启用工具调用
USE_TOOLS_DEFAULT=true

# ============================================
# 🎤 实时语音配置
# ============================================
# 实时语音功能开关
REALTIME_VOICE_ENABLED=true

# 实时语音模型
REALTIME_VOICE_MODEL=gpt-4o-realtime-preview-2024-12-17

# Token过期时间（秒）
REALTIME_VOICE_TOKEN_EXPIRY=3600

# 音频采样率
REALTIME_VOICE_SAMPLE_RATE=24000

# 音频声道数
REALTIME_VOICE_CHANNELS=1

# ============================================
# ⚡ 性能优化配置
# ============================================
# OpenAI API总超时时间 (秒)
OPENAI_API_TIMEOUT=30.0

# OpenAI连接超时时间 (秒)
OPENAI_CONNECT_TIMEOUT=10.0

# OpenAI读取超时时间 (秒)
OPENAI_READ_TIMEOUT=30.0

# OpenAI写入超时时间 (秒)
OPENAI_WRITE_TIMEOUT=10.0

# OpenAI连接池超时时间 (秒)
OPENAI_POOL_TIMEOUT=30.0

# OpenAI API重试次数
OPENAI_API_RETRIES=2

# 最大连接数
MAX_CONNECTIONS=100

# 最大保持连接数
MAX_KEEPALIVE_CONNECTIONS=20

# 连接保持时间 (秒)
KEEPALIVE_EXPIRY=30

# 是否验证SSL证书
VERIFY_SSL=false

# 流式响应分块阈值
CHUNK_SPLIT_THRESHOLD=100

# ============================================
# 📊 缓存配置
# ============================================
# 是否启用Redis缓存
USE_REDIS_CACHE=false

# Redis服务器地址
REDIS_HOST=localhost

# Redis服务器端口
REDIS_PORT=6379

# Redis数据库编号
REDIS_DB=0

# Redis密码
REDIS_PASSWORD=

# Redis缓存TTL (秒)
REDIS_TTL=1800

# 内存缓存最大条目数
MEMORY_CACHE_MAXSIZE=1000

# 内存缓存TTL (秒)
MEMORY_CACHE_TTL=1800

# ============================================
# 📈 监控和日志配置
# ============================================
# 是否启用性能监控
ENABLE_PERFORMANCE_MONITOR=true

# 是否启用性能日志
PERFORMANCE_LOG_ENABLED=true

# 性能监控最大历史记录数
PERFORMANCE_MAX_HISTORY=1000

# 性能监控采样率 (1.0 = 100%采样)
PERFORMANCE_SAMPLING_RATE=1.0

# 日志级别
LOG_LEVEL=INFO

# 日志文件名
LOG_FILE_NAME=app.log

# ============================================
# 📋 API元数据配置
# ============================================
# API标题
API_TITLE=YYChat OpenAI兼容API

# API描述
API_DESCRIPTION=YYChat是一个基于OpenAI API的聊天机器人，使用Mem0和ChromaDB进行记忆管理。

# API版本
API_VERSION=0.1.1

# ============================================
# 🎵 音频处理配置
# ============================================
# 音频文件大小限制 (MB)
AUDIO_MAX_SIZE_MB=25

# 文本长度限制 (字符)
TEXT_MAX_LENGTH=4096

# 最小语速
VOICE_SPEED_MIN=0.25

# 最大语速
VOICE_SPEED_MAX=4.0

# 音频块大小 (KB)
AUDIO_CHUNK_SIZE_KB=32

# 音频压缩质量 (1-100)
AUDIO_COMPRESSION_QUALITY=70

# ============================================
# 🎤 语音和模型默认配置
# ============================================
# 默认语音转文本模型
DEFAULT_WHISPER_MODEL=whisper-1

# 默认文本转语音模型
DEFAULT_TTS_MODEL=tts-1

# 默认语音
DEFAULT_VOICE=shimmer

# 默认聊天模型
DEFAULT_CHAT_MODEL=gpt-4o-mini

# ============================================
# ⏱️ 超时和重试配置
# ============================================
# 连接超时 (秒)
CONNECTION_TIMEOUT=30

# 重试次数
MAX_RETRY_ATTEMPTS=3

# 语音活动检测阈值
VAD_SILENCE_THRESHOLD=10

# 音频缓冲区大小
AUDIO_BUFFER_SIZE=100

# 音频处理器超时 (秒)
AUDIO_PROCESSOR_TIMEOUT=30.0

# 音频处理器最大工作线程数
AUDIO_PROCESSOR_MAX_WORKERS=4

# ============================================
# 🌐 WebSocket和网络配置
# ============================================
# WebSocket接收超时 (秒)
WEBSOCKET_RECEIVE_TIMEOUT=5.0

# WebSocket连接超时 (秒)
WEBSOCKET_CONNECT_TIMEOUT=10.0

# WebSocket关闭超时 (秒)
WEBSOCKET_CLOSE_TIMEOUT=5.0

# WebSocket ping超时 (秒)
WEBSOCKET_PING_TIMEOUT=10.0

# 最大重试次数
MAX_CONNECTION_ATTEMPTS=5

# ============================================
# 🎯 实时语音配置
# ============================================
# 实时语音连接超时 (秒)
REALTIME_CONNECTION_TIMEOUT=30

# 实时语音重连次数
REALTIME_RECONNECT_ATTEMPTS=3

# 实时语音空闲超时 (毫秒)
REALTIME_IDLE_TIMEOUT_MS=30000

# 实时语音阈值
REALTIME_VOICE_THRESHOLD=0.2

# ============================================
# 📊 测试和调试配置
# ============================================
# 测试超时时间 (秒)
TEST_TIMEOUT=30

# 测试重试次数
TEST_MAX_ATTEMPTS=5

# 调试模式
DEBUG_MODE=false

# 详细日志
VERBOSE_LOGGING=false
