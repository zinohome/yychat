# ============================================
# YYChat Configuration Example
# ============================================
# 复制此文件为 .env 并填入实际值
# 配置项按重要性和使用频率排序

# ============================================
# 🔑 核心API密钥配置 (必须配置)
# ============================================
# OpenAI API密钥 - 必需
OPENAI_API_KEY=your-openai-api-key-here

# YYChat API密钥 - 用于API访问控制
YYCHAT_API_KEY=your-yychat-api-key-here

# 外部服务API密钥
TAVILY_API_KEY=your-tavily-api-key-here

# ============================================
# 🤖 AI模型配置
# ============================================
# OpenAI模型配置
OPENAI_MODEL=gpt-4.1
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_TEMPERATURE=0.75
OPENAI_MAX_TOKENS=16384

# ============================================
# 🧠 记忆管理配置
# ============================================
# Mem0配置
MEM0_API_KEY=your-mem0-api-key-here
MEM0_BASE_URL=http://192.168.66.163:8765
MEMO_USE_LOCAL=false
MEM0_LLM_PROVIDER=openai
MEM0_LLM_CONFIG_MODEL=gpt-4.1
MEM0_LLM_CONFIG_MAX_TOKENS=32768
MEM0_EMBEDDER_MODEL=text-embedding-3-small

# 记忆检索配置
MEMORY_RETRIEVAL_LIMIT=5
MEMORY_RETRIEVAL_TIMEOUT=0.5
ENABLE_MEMORY_RETRIEVAL=true
MEMORY_SAVE_MODE=both

# 历史消息限制配置
# 发送给模型的历史消息最大数量（保留最近的N条消息，避免请求过大）
# 建议值：20-30条（既能保持对话连贯性，又不会导致token消耗过大）
# 默认值：30条（约15轮对话，与前端保持一致）
MAX_MESSAGE_HISTORY_COUNT=30

# ============================================
# 💾 数据存储配置
# ============================================
# 向量数据库配置
VECTOR_STORE_PROVIDER=chroma
CHROMA_PERSIST_DIRECTORY=./chroma_db
CHROMA_COLLECTION_NAME=chat_history

# Qdrant配置 (当VECTOR_STORE_PROVIDER=qdrant时使用)
QDRANT_HOST=192.168.66.163
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=chat_history

# ============================================
# 🚀 服务器配置
# ============================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# ============================================
# 💬 聊天引擎配置
# ============================================
# 聊天引擎类型: chat_engine, mem0_proxy
CHAT_ENGINE=chat_engine

# ============================================
# 🎤 实时语音配置
# ============================================
# 实时语音功能开关
REALTIME_VOICE_ENABLED=true
# 实时语音模型
REALTIME_VOICE_MODEL=gpt-4o-realtime-preview-2024-10-01
# Token过期时间（秒）
REALTIME_VOICE_TOKEN_EXPIRY=3600
# 音频采样率
REALTIME_VOICE_SAMPLE_RATE=24000
# 音频声道数
REALTIME_VOICE_CHANNELS=1

# ============================================
# 🔊 音频处理配置
# ============================================
# STT（语音转文本）配置
# 最大音频文件大小（字节，默认25MB）
STT_MAX_AUDIO_SIZE=26214400
# 音频压缩质量（1-100，默认70）
STT_COMPRESSION_QUALITY=70
# 音频采样率（Hz，默认16000）
STT_SAMPLE_RATE=16000
# 音频声道数（1=单声道, 2=立体声，默认1）
STT_CHANNELS=1
# 音频位深度（字节数，2=16位，默认2）
STT_SAMPLE_WIDTH=2
# 默认STT模型
STT_DEFAULT_MODEL=whisper-1
# 响应格式（text, json, verbose_json，默认text）
STT_RESPONSE_FORMAT=text

# TTS（文本转语音）配置
# 最大文本长度（字符数，默认4096）
TTS_MAX_TEXT_LENGTH=4096
# 默认语音类型（alloy, echo, fable, onyx, nova, shimmer，默认shimmer）
TTS_DEFAULT_VOICE=shimmer
# 默认TTS模型（tts-1, tts-1-hd，默认tts-1）
TTS_DEFAULT_MODEL=tts-1
# 默认语速（0.25-4.0，默认1.0）
TTS_DEFAULT_SPEED=1.0
# 最小语速（默认0.25）
TTS_MIN_SPEED=0.25
# 最大语速（默认4.0）
TTS_MAX_SPEED=4.0
# 流式TTS分块大小（字节，默认32KB）
TTS_STREAM_CHUNK_SIZE=32768
# TTS线程池大小（默认3）
TTS_THREAD_POOL_SIZE=3

# 音频处理工具配置
# 标准化采样率（Hz，默认16000）
AUDIO_NORMALIZE_SAMPLE_RATE=16000
# 标准化声道数（默认1）
AUDIO_NORMALIZE_CHANNELS=1
# 标准化位深度（字节数，2=16位，默认2）
AUDIO_NORMALIZE_SAMPLE_WIDTH=2
# 最小WAV文件大小（字节，默认44）
AUDIO_MIN_WAV_SIZE=44

# 音频压缩配置
# 高质量阈值（默认90）
AUDIO_COMPRESSION_QUALITY_HIGH=90
# 中等质量阈值（默认70）
AUDIO_COMPRESSION_QUALITY_MEDIUM=70
# 低质量阈值（默认50）
AUDIO_COMPRESSION_QUALITY_LOW=50
# 高质量比特率（默认128k）
AUDIO_COMPRESSION_BITRATE_HIGH=128k
# 中等质量比特率（默认64k）
AUDIO_COMPRESSION_BITRATE_MEDIUM=64k
# 低质量比特率（默认32k）
AUDIO_COMPRESSION_BITRATE_LOW=32k

# 音频缓存配置
# 音频缓存最大条目数（默认100）
AUDIO_CACHE_MAX_SIZE=100
# TTS缓存大小（默认50）
TTS_CACHE_SIZE=50

# WebSocket音频配置
# WebSocket音频块大小（字节，默认1024）
AUDIO_CHUNK_SIZE=1024

# 默认人格: health_assistant, friendly, professional
DEFAULT_PERSONALITY=health_assistant

# 默认行为
STREAM_DEFAULT=true
USE_TOOLS_DEFAULT=true

# ============================================
# ⚡ 性能优化配置
# ============================================
# OpenAI API性能配置
OPENAI_API_TIMEOUT=30.0
OPENAI_CONNECT_TIMEOUT=10.0
OPENAI_READ_TIMEOUT=30.0
OPENAI_WRITE_TIMEOUT=10.0
OPENAI_POOL_TIMEOUT=30.0
OPENAI_API_RETRIES=2

# HTTP客户端配置
MAX_CONNECTIONS=100
MAX_KEEPALIVE_CONNECTIONS=20
KEEPALIVE_EXPIRY=30
VERIFY_SSL=false

# 流式响应配置
CHUNK_SPLIT_THRESHOLD=100

# ============================================
# 📊 缓存配置
# ============================================
# Redis缓存配置
USE_REDIS_CACHE=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_TTL=1800

# 内存缓存配置 (Redis降级方案)
MEMORY_CACHE_MAXSIZE=1000
MEMORY_CACHE_TTL=1800

# ============================================
# 📈 监控和日志配置
# ============================================
# 性能监控
ENABLE_PERFORMANCE_MONITOR=true
PERFORMANCE_LOG_ENABLED=true
PERFORMANCE_MAX_HISTORY=1000
PERFORMANCE_SAMPLING_RATE=1.0

# 日志配置
LOG_LEVEL=INFO
LOG_FILE_NAME=app.log

# ============================================
# 📋 API元数据配置
# ============================================
API_TITLE=YYChat OpenAI兼容API
API_DESCRIPTION=YYChat是一个基于OpenAI API的聊天机器人，使用Mem0和ChromaDB进行记忆管理。
API_VERSION=0.1.1

