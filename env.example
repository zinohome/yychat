# ============================================
# YYChat Configuration Example
# ============================================
# 复制此文件为 .env 并填入实际值
# 配置项按重要性和使用频率排序

# ============================================
# 🔑 核心API密钥配置 (必须配置)
# ============================================
# OpenAI API密钥 - 必需
OPENAI_API_KEY=your-openai-api-key-here

# YYChat API密钥 - 用于API访问控制
YYCHAT_API_KEY=your-yychat-api-key-here

# 外部服务API密钥
TAVILY_API_KEY=your-tavily-api-key-here

# ============================================
# 🤖 AI模型配置
# ============================================
# OpenAI模型配置
OPENAI_MODEL=gpt-4.1
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_TEMPERATURE=0.75
OPENAI_MAX_TOKENS=16384

# ============================================
# 🧠 记忆管理配置
# ============================================
# Mem0配置
MEM0_API_KEY=your-mem0-api-key-here
MEM0_BASE_URL=http://192.168.66.163:8765
MEMO_USE_LOCAL=false
MEM0_LLM_PROVIDER=openai
MEM0_LLM_CONFIG_MODEL=gpt-4.1
MEM0_LLM_CONFIG_MAX_TOKENS=32768
MEM0_EMBEDDER_MODEL=text-embedding-3-small

# 记忆检索配置
MEMORY_RETRIEVAL_LIMIT=5
MEMORY_RETRIEVAL_TIMEOUT=0.5
ENABLE_MEMORY_RETRIEVAL=true
MEMORY_SAVE_MODE=both

# ============================================
# 💾 数据存储配置
# ============================================
# 向量数据库配置
VECTOR_STORE_PROVIDER=chroma
CHROMA_PERSIST_DIRECTORY=./chroma_db
CHROMA_COLLECTION_NAME=chat_history

# Qdrant配置 (当VECTOR_STORE_PROVIDER=qdrant时使用)
QDRANT_HOST=192.168.66.163
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=chat_history

# ============================================
# 🚀 服务器配置
# ============================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# ============================================
# 💬 聊天引擎配置
# ============================================
# 聊天引擎类型: chat_engine, mem0_proxy
CHAT_ENGINE=chat_engine

# ============================================
# 🎤 实时语音配置
# ============================================
# 实时语音功能开关
REALTIME_VOICE_ENABLED=true
# 实时语音模型
REALTIME_VOICE_MODEL=gpt-4o-realtime-preview-2024-10-01
# Token过期时间（秒）
REALTIME_VOICE_TOKEN_EXPIRY=3600
# 音频采样率
REALTIME_VOICE_SAMPLE_RATE=24000
# 音频声道数
REALTIME_VOICE_CHANNELS=1

# 默认人格: health_assistant, friendly, professional
DEFAULT_PERSONALITY=health_assistant

# 默认行为
STREAM_DEFAULT=true
USE_TOOLS_DEFAULT=true

# ============================================
# ⚡ 性能优化配置
# ============================================
# OpenAI API性能配置
OPENAI_API_TIMEOUT=30.0
OPENAI_CONNECT_TIMEOUT=10.0
OPENAI_READ_TIMEOUT=30.0
OPENAI_WRITE_TIMEOUT=10.0
OPENAI_POOL_TIMEOUT=30.0
OPENAI_API_RETRIES=2

# HTTP客户端配置
MAX_CONNECTIONS=100
MAX_KEEPALIVE_CONNECTIONS=20
KEEPALIVE_EXPIRY=30
VERIFY_SSL=false

# 流式响应配置
CHUNK_SPLIT_THRESHOLD=100

# ============================================
# 📊 缓存配置
# ============================================
# Redis缓存配置
USE_REDIS_CACHE=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_TTL=1800

# 内存缓存配置 (Redis降级方案)
MEMORY_CACHE_MAXSIZE=1000
MEMORY_CACHE_TTL=1800

# ============================================
# 📈 监控和日志配置
# ============================================
# 性能监控
ENABLE_PERFORMANCE_MONITOR=true
PERFORMANCE_LOG_ENABLED=true
PERFORMANCE_MAX_HISTORY=1000
PERFORMANCE_SAMPLING_RATE=1.0

# 日志配置
LOG_LEVEL=INFO
LOG_FILE_NAME=app.log

# ============================================
# 📋 API元数据配置
# ============================================
API_TITLE=YYChat OpenAI兼容API
API_DESCRIPTION=YYChat是一个基于OpenAI API的聊天机器人，使用Mem0和ChromaDB进行记忆管理。
API_VERSION=0.1.1

# ============================================
# 🎵 音频处理配置
# ============================================
# 音频文件大小限制 (MB)
AUDIO_MAX_SIZE_MB=25
# 文本长度限制 (字符)
TEXT_MAX_LENGTH=4096
# 语速范围
VOICE_SPEED_MIN=0.25
VOICE_SPEED_MAX=4.0
# 音频块大小 (KB)
AUDIO_CHUNK_SIZE_KB=32
# 音频压缩质量 (1-100)
AUDIO_COMPRESSION_QUALITY=70

# ============================================
# 🎤 语音和模型默认配置
# ============================================
# 默认语音模型
DEFAULT_WHISPER_MODEL=whisper-1
DEFAULT_TTS_MODEL=tts-1
# 默认语音
DEFAULT_VOICE=shimmer
# 默认聊天模型
DEFAULT_CHAT_MODEL=gpt-4o-mini

# ============================================
# ⏱️ 超时和重试配置
# ============================================
# 连接超时 (秒)
CONNECTION_TIMEOUT=30
# 重试次数
MAX_RETRY_ATTEMPTS=3
# 语音活动检测阈值
VAD_SILENCE_THRESHOLD=10
# 音频缓冲区大小
AUDIO_BUFFER_SIZE=100
# 音频处理器超时 (秒)
AUDIO_PROCESSOR_TIMEOUT=30.0
# 音频处理器最大工作线程数
AUDIO_PROCESSOR_MAX_WORKERS=4

# ============================================
# 🌐 WebSocket和网络配置
# ============================================
# WebSocket接收超时 (秒)
WEBSOCKET_RECEIVE_TIMEOUT=5.0
# WebSocket连接超时 (秒)
WEBSOCKET_CONNECT_TIMEOUT=10.0
# WebSocket关闭超时 (秒)
WEBSOCKET_CLOSE_TIMEOUT=5.0
# WebSocket ping超时 (秒)
WEBSOCKET_PING_TIMEOUT=10.0
# 最大重试次数
MAX_CONNECTION_ATTEMPTS=5

# ============================================
# 🎯 实时语音配置
# ============================================
# 实时语音连接超时 (秒)
REALTIME_CONNECTION_TIMEOUT=30
# 实时语音重连次数
REALTIME_RECONNECT_ATTEMPTS=3
# 实时语音空闲超时 (毫秒)
REALTIME_IDLE_TIMEOUT_MS=30000
# 实时语音阈值
REALTIME_VOICE_THRESHOLD=0.2

# ============================================
# 📊 测试和调试配置
# ============================================
# 测试超时时间 (秒)
TEST_TIMEOUT=30
# 测试重试次数
TEST_MAX_ATTEMPTS=5
# 调试模式
DEBUG_MODE=false
# 详细日志
VERBOSE_LOGGING=false

